{"ast":null,"code":"var _jsxFileName = \"/home/beardrubyblue/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B/market_maxima/src/pages/EditProductPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useMemo } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { updateProduct, updateLocalProduct, deleteProduct, deleteLocalProduct } from '../features/products/ProductSlice';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EditProductPage = () => {\n  _s();\n  const {\n    id\n  } = useParams();\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const products = useSelector(state => state.products.items);\n  const product = useMemo(() => products.find(product => product.id.toString() === id) || {}, [products, id]);\n  const [formData, setFormData] = useState({\n    title: '',\n    price: '',\n    description: '',\n    category: '',\n    published: false,\n    ...product\n  });\n  useEffect(() => {\n    if (product) {\n      setFormData(product);\n    }\n  }, [product]);\n  const handleChange = e => {\n    const {\n      name,\n      value,\n      type,\n      checked\n    } = e.target;\n    setFormData(prevData => ({\n      ...prevData,\n      [name]: type === 'checkbox' ? checked : value\n    }));\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (product.id > 100000) {\n      dispatch(updateLocalProduct(formData));\n    } else {\n      await dispatch(updateProduct(formData)).unwrap();\n    }\n    navigate('/products');\n  };\n  const handleDelete = async () => {\n    const confirmDelete = window.confirm(\"Are you sure you want to delete this product?\");\n    if (confirmDelete) {\n      if (product.id > 100000) {\n        dispatch(deleteLocalProduct(product.id));\n      } else {\n        await dispatch(deleteProduct(product.id)).unwrap();\n      }\n      navigate('/products');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex justify-center\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"w-full max-w-md bg-white p-8 border rounded shadow-md\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-2xl font-bold mb-6\",\n        children: \"Edit Product\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 mb-2\",\n          children: \"Title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"title\",\n          value: formData.title,\n          onChange: handleChange,\n          className: \"w-full p-2 border rounded\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 mb-2\",\n          children: \"Price\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          name: \"price\",\n          value: formData.price,\n          onChange: handleChange,\n          className: \"w-full p-2 border rounded\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 mb-2\",\n          children: \"Description\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          name: \"description\",\n          value: formData.description,\n          onChange: handleChange,\n          className: \"w-full p-2 border rounded\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 mb-2\",\n          children: \"Category\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"category\",\n          value: formData.category,\n          onChange: handleChange,\n          className: \"w-full p-2 border rounded\",\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 mb-2\",\n          children: \"Published\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          name: \"published\",\n          checked: formData.published,\n          onChange: handleChange,\n          className: \"mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), \"Yes\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"bg-blue-500 text-white p-2 rounded mr-4\",\n        children: \"Update Product\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: handleDelete,\n        className: \"bg-red-500 text-white p-2 rounded\",\n        children: \"Delete Product\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 5\n  }, this);\n};\n_s(EditProductPage, \"RtVTFjVkZBYkmKnf0BHyLWMtEHk=\", false, function () {\n  return [useParams, useNavigate, useDispatch, useSelector];\n});\n_c = EditProductPage;\nexport default EditProductPage;\nvar _c;\n$RefreshReg$(_c, \"EditProductPage\");","map":{"version":3,"names":["React","useState","useEffect","useMemo","useParams","useNavigate","useDispatch","useSelector","updateProduct","updateLocalProduct","deleteProduct","deleteLocalProduct","jsxDEV","_jsxDEV","EditProductPage","_s","id","navigate","dispatch","products","state","items","product","find","toString","formData","setFormData","title","price","description","category","published","handleChange","e","name","value","type","checked","target","prevData","handleSubmit","preventDefault","unwrap","handleDelete","confirmDelete","window","confirm","className","children","onSubmit","fileName","_jsxFileName","lineNumber","columnNumber","onChange","required","onClick","_c","$RefreshReg$"],"sources":["/home/beardrubyblue/Документы/market_maxima/src/pages/EditProductPage.jsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { updateProduct, updateLocalProduct, deleteProduct, deleteLocalProduct } from '../features/products/ProductSlice';\n\nconst EditProductPage = () => {\n  const { id } = useParams();\n  const navigate = useNavigate();\n  const dispatch = useDispatch();\n  const products = useSelector(state => state.products.items);\n\n  const product = useMemo(() => products.find(product => product.id.toString() === id) || {}, [products, id]);\n\n  const [formData, setFormData] = useState({\n    title: '',\n    price: '',\n    description: '',\n    category: '',\n    published: false,\n    ...product\n  });\n\n  useEffect(() => {\n    if (product) {\n      setFormData(product);\n    }\n  }, [product]);\n\n  const handleChange = (e) => {\n    const { name, value, type, checked } = e.target;\n    setFormData((prevData) => ({\n      ...prevData,\n      [name]: type === 'checkbox' ? checked : value,\n    }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (product.id > 100000) {\n      dispatch(updateLocalProduct(formData));\n    } else {\n      await dispatch(updateProduct(formData)).unwrap();\n    }\n    navigate('/products');\n  };\n\n  const handleDelete = async () => {\n    const confirmDelete = window.confirm(\"Are you sure you want to delete this product?\");\n    if (confirmDelete) {\n      if (product.id > 100000) {\n        dispatch(deleteLocalProduct(product.id));\n      } else {\n        await dispatch(deleteProduct(product.id)).unwrap();\n      }\n      navigate('/products');\n    }\n  };\n\n  return (\n    <div className=\"flex justify-center\">\n      <form onSubmit={handleSubmit} className=\"w-full max-w-md bg-white p-8 border rounded shadow-md\">\n        <h2 className=\"text-2xl font-bold mb-6\">Edit Product</h2>\n        <div className=\"mb-4\">\n          <label className=\"block text-gray-700 mb-2\">Title</label>\n          <input\n            type=\"text\"\n            name=\"title\"\n            value={formData.title}\n            onChange={handleChange}\n            className=\"w-full p-2 border rounded\"\n            required\n          />\n        </div>\n        <div className=\"mb-4\">\n          <label className=\"block text-gray-700 mb-2\">Price</label>\n          <input\n            type=\"number\"\n            name=\"price\"\n            value={formData.price}\n            onChange={handleChange}\n            className=\"w-full p-2 border rounded\"\n            required\n          />\n        </div>\n        <div className=\"mb-4\">\n          <label className=\"block text-gray-700 mb-2\">Description</label>\n          <textarea\n            name=\"description\"\n            value={formData.description}\n            onChange={handleChange}\n            className=\"w-full p-2 border rounded\"\n            required\n          />\n        </div>\n        <div className=\"mb-4\">\n          <label className=\"block text-gray-700 mb-2\">Category</label>\n          <input\n            type=\"text\"\n            name=\"category\"\n            value={formData.category}\n            onChange={handleChange}\n            className=\"w-full p-2 border rounded\"\n            required\n          />\n        </div>\n        <div className=\"mb-4\">\n          <label className=\"block text-gray-700 mb-2\">Published</label>\n          <input\n            type=\"checkbox\"\n            name=\"published\"\n            checked={formData.published}\n            onChange={handleChange}\n            className=\"mr-2\"\n          />\n          Yes\n        </div>\n        <button type=\"submit\" className=\"bg-blue-500 text-white p-2 rounded mr-4\">Update Product</button>\n        <button type=\"button\" onClick={handleDelete} className=\"bg-red-500 text-white p-2 rounded\">Delete Product</button>\n      </form>\n    </div>\n  );\n};\n\nexport default EditProductPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}